<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Prac 7 Task 1.4</title>
        <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
        <style>.button-success {background: rgb(28, 184, 65);color: white;}</style>
    </head>
    <body>

        <main>

            <h1>My Blog</h1>
            <hr />
            <div id="newpost">
                <h2>Add a post</h2>
                <form class="pure-form">

                    <fieldset class="pure-group">
                        <input type="text" class="pure-input-1-2" placeholder="Blog post title">
                        <textarea class="pure-input-1-2" placeholder="Blog Post Content"></textarea>
                    </fieldset>

                    <button type="button" class="pure-button pure-input-1-2 pure-button-primary">make post</button>
                </form>
            </div>
            <hr />
            <div id="posts">
                <h2>Current Posts</h2>
                <form class="pure-form">
                    <button type="button" class="pure-button pure-input-1-2 pure-button-primary">show all posts</button>
                </form>

            </div>

            <div id="tcs" style="display: none;">
                <h2>Terms and Conditions</h2>
                <p>All your base are belong to us.</p>
                <button type="button" class="pure-button button-success">Accept</button>
            </div>

        </main>

        <script>
            document.querySelector('#newposts button').addEventListener('click', ()=>{
                var title= document.querySelector('#newposts input').value;
                var content= document.querySelector('#newposts textarea').value;

                var xhr= new XMLHttpRequest();
                xhr.oprn('POST','/users/addpost',true);
                xhr.setRequestHeader('Content-Type','application/json');
                xhr.send(JSON.stringify({title:title,content:content}));
            });

            document.querySelector('#posts button').addEventListener('click', ()=>{
                var xhr= XMLHttpRequest();
                xhr.open('GET','/users/getposts',true);
                xhr.onload= ()=>{
                    var postsDiv= document.querySelector('#posts');
                    var post= JSON.parse(this.text);
                    post.forEach((post)=>{
                        var div= document.createElement('div');
                        div.innter.appendChild(div);
                    });
                };
            });
        </script>
    </body>

</html>
